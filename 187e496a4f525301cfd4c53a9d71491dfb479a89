{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "2990d9d5_06877af9",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2023-12-26T14:02:50Z",
      "side": 1,
      "message": "sm8250 kernel doesn\u0027t seem to support erofs",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0b45e583_50ddc9fe",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 25732
      },
      "writtenOn": "2023-12-26T14:53:01Z",
      "side": 1,
      "message": "It does",
      "parentUuid": "2990d9d5_06877af9",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cadc54a3_20c813e0",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31578
      },
      "writtenOn": "2023-12-26T15:03:29Z",
      "side": 1,
      "message": "I will check this.",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4f440134_eeab85aa",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2023-12-26T23:14:11Z",
      "side": 1,
      "message": "android_kernel_sony_sm8250 does not have fs/erofs, android_kernel_oneplus_sm8250 and android_kernel_sony_sm8350 have fs/erofs.",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0ee4b490_5f6095f8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31578
      },
      "writtenOn": "2023-12-26T23:15:06Z",
      "side": 1,
      "message": "it is in drivers/staging",
      "parentUuid": "4f440134_eeab85aa",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "dc974d6e_394418c1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2023-12-26T23:23:20Z",
      "side": 1,
      "message": "Are pdx203_defconfig and pdx206_defconfig missing CONFIG_EROFS_FS?",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f1b92daa_63952ea1",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31578
      },
      "writtenOn": "2023-12-26T23:23:57Z",
      "side": 1,
      "message": "yes, we are missing that..",
      "parentUuid": "dc974d6e_394418c1",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "757741f4_b7237953",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2023-12-28T06:47:53Z",
      "side": 1,
      "message": "I found that the staging erofs driver does not work well with lineage-21. We need the updated erofs driver. See this chain \u003chttps://review.lineageos.org/c/LineageOS/android_kernel_sony_sm8250/+/378281\u003e.",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "481b7a27_0dbabb1a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31578
      },
      "writtenOn": "2023-12-29T03:37:25Z",
      "side": 1,
      "message": "I checked the chain and it worked. Do you want to merge the kernel chain or ..?",
      "parentUuid": "757741f4_b7237953",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d83cf03e_89f46d90",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2023-12-29T07:15:36Z",
      "side": 1,
      "message": "I prefer not to merge this commit and the kernel chain. I want to hold the erofs for a while and then abandon.",
      "parentUuid": "481b7a27_0dbabb1a",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "71454fc6_f5cdc84a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31578
      },
      "writtenOn": "2023-12-29T07:35:42Z",
      "side": 1,
      "message": "ok",
      "parentUuid": "d83cf03e_89f46d90",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3cc9c675_1f9b078e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31578
      },
      "writtenOn": "2024-04-18T14:05:02Z",
      "side": 1,
      "message": "Might need to try OTA from previous build (no erofs support) to a build that contains erofs build, and see if it works.",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d94b427c_c0c8ecd8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2024-04-18T14:05:58Z",
      "side": 1,
      "message": "updated kernel supports erofs",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ddf8d42d_8a92422b",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2024-04-19T00:07:28Z",
      "side": 1,
      "message": "OTA will fail with the recovery kernel that do not support erofs.\nSo we need to release the kernel update first and then release this commit some time later.\nIt might be a good idea to release this commit around the next QPR.",
      "parentUuid": "3cc9c675_1f9b078e",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "22d5c217_0421533d",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 10067
      },
      "writtenOn": "2024-04-19T00:08:51Z",
      "side": 1,
      "message": "you aren\u0027t even mounting erofs tho? also, OTA is done in OS...",
      "parentUuid": "ddf8d42d_8a92422b",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "535b4fbe_789c0b63",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2024-04-19T01:51:22Z",
      "side": 1,
      "message": "sorry, i tested updates via recovery rather than OTA.",
      "parentUuid": "22d5c217_0421533d",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3c1ad82d_46572b41",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 10067
      },
      "writtenOn": "2024-04-19T08:23:19Z",
      "side": 1,
      "message": "yeah, it should still be fine? recovery has no need to mount/parse/etc erofs vendor/odm, it just has to copy bytes as is.",
      "parentUuid": "535b4fbe_789c0b63",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a8b70378_b61840cc",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 14962
      },
      "writtenOn": "2024-04-19T09:18:19Z",
      "side": 1,
      "message": "I tried to update the ROM (erofs kernel + this commit) via recovery (no erofs kernel) but it failed.",
      "parentUuid": "3c1ad82d_46572b41",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cbab9124_23d269c3",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 10067
      },
      "writtenOn": "2024-04-19T10:30:52Z",
      "side": 1,
      "message": "how does it actually fail...?",
      "parentUuid": "a8b70378_b61840cc",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "75e00438_c636180a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 1
      },
      "lineNbr": 0,
      "author": {
        "id": 31578
      },
      "writtenOn": "2024-04-19T16:03:20Z",
      "side": 1,
      "message": "The recovery.log is as follows:\n```\n[  129.542243] 03-04 05:06:47.591   627   627 I update_engine_sideload: [INFO:subprocess.cc(103)] Running \"/postinstall/system/bin/otapreopt_script 1 3\"\n[  129.554826] 03-04 05:06:47.604   627   627 I update_engine_sideload: [INFO:subprocess.cc(163)] Subprocess output:\n[  129.554832] /postinstall/system/bin/otapreopt_script: Error: boot-complete not detected.\n[  129.554834]\n[  129.555368] 03-04 05:06:47.604   627   627 W update_engine_sideload: [WARNING:utils.cc(685)] Unable to mount destination device /dev/block/dm-3 on /postinstall as erofs: No such device (19)\n[  129.555387] 03-04 05:06:47.604   627   627 E update_engine_sideload: [ERROR:utils.cc(689)] Unable to mount /dev/block/dm-3 with any supported type\n[  129.555417] 03-04 05:06:47.604   627   627 E update_engine_sideload: [ERROR:snapshot_stub.cpp(169)] UnmapAllSnapshots should never be called.\n[  129.555441] 03-04 05:06:47.604   627   627 I update_engine_sideload: [INFO:dynamic_partition_control_android.cc(311)] Destroying [odm_b, product_b, system_b, vendor_b] from device mapper\n[  129.581981] 03-04 05:06:47.631   627   627 I update_engine_sideload: [INFO:fs_mgr_dm_linear.cpp(277)] [libfs_mgr] Unmapped logical partition odm_b\n[  129.582008] 03-04 05:06:47.631   627   627 I update_engine_sideload: [INFO:dynamic_partition_control_android.cc(287)] Skip UnmapUpdateSnapshot(odm_b) because metadata is not mounted\n[  129.582031] 03-04 05:06:47.631   627   627 I update_engine_sideload: [INFO:dynamic_partition_control_android.cc(296)] Successfully unmapped odm_b from device mapper.\n[  129.593981] 03-04 05:06:47.643   627   627 I update_engine_sideload: [INFO:fs_mgr_dm_linear.cpp(277)] [libfs_mgr] Unmapped logical partition product_b\n[  129.594000] 03-04 05:06:47.643   627   627 I update_engine_sideload: [INFO:dynamic_partition_control_android.cc(287)] Skip UnmapUpdateSnapshot(product_b) because metadata is not mounted\n[  129.594016] 03-04 05:06:47.643   627   627 I update_engine_sideload: [INFO:dynamic_partition_control_android.cc(296)] Successfully unmapped product_b from device mapper.\n[  129.613976] 03-04 05:06:47.663   627   627 I update_engine_sideload: [INFO:fs_mgr_dm_linear.cpp(277)] [libfs_mgr] Unmapped logical partition system_b\n[  129.613993] 03-04 05:06:47.663   627   627 I update_engine_sideload: [INFO:dynamic_partition_control_android.cc(287)] Skip UnmapUpdateSnapshot(system_b) because metadata is not mounted\n[  129.614010] 03-04 05:06:47.663   627   627 I update_engine_sideload: [INFO:dynamic_partition_control_android.cc(296)] Successfully unmapped system_b from device mapper.\n[  129.645991] 03-04 05:06:47.695   627   627 I update_engine_sideload: [INFO:fs_mgr_dm_linear.cpp(277)] [libfs_mgr] Unmapped logical partition vendor_b\n[  129.646016] 03-04 05:06:47.695   627   627 I update_engine_sideload: [INFO:dynamic_partition_control_android.cc(287)] Skip UnmapUpdateSnapshot(vendor_b) because metadata is not mounted\n[  129.646036] 03-04 05:06:47.695   627   627 I update_engine_sideload: [INFO:dynamic_partition_control_android.cc(296)] Successfully unmapped vendor_b from device mapper.\n[  129.646057] 03-04 05:06:47.695   627   627 I update_engine_sideload: [INFO:postinstall_runner_action.cc(524)] Unmapped all partitions.\n[  129.646076] 03-04 05:06:47.695   627   627 E update_engine_sideload: [ERROR:postinstall_runner_action.cc(532)] Postinstall action failed.\n[  129.646141] 03-04 05:06:47.695   627   627 I update_engine_sideload: [INFO:action_processor.cc(116)] ActionProcessor: finished last action PostinstallRunnerAction with code ErrorCode::kPostInstallMountError\n[  129.646163] 03-04 05:06:47.695   627   627 I update_engine_sideload: [INFO:update_attempter_android.cc(712)] Processing Done.\n[  129.646188] 03-04 05:06:47.695   627   627 E update_engine_sideload: [ERROR:snapshot_stub.cpp(169)] UnmapAllSnapshots should never be called.\n[  129.646335] 03-04 05:06:47.695   627   627 E update_engine_sideload: [ERROR:snapshot_stub.cpp(169)] UnmapAllSnapshots should never be called.\n```\n\nSeems it does need to mount the /dev/block/dm-3 partition as postinstall",
      "parentUuid": "3c1ad82d_46572b41",
      "revId": "187e496a4f525301cfd4c53a9d71491dfb479a89",
      "serverId": "1ec6b3db-b2c1-4fa4-84a2-4c7efe89ba71"
    }
  ],
  "submitRequirementResults": []
}